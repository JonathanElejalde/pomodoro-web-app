{% extends "shared/base.html" %}


{% block title %}
  <title>Create a Pomodoro</title>
  <script src="/static/js/timer.js" defer></script>
{% endblock %}

{% block content %}
  <div class="container">
    <div class="row">
      <div class="text-danger font-weight-bold">
        {% for error in errors %}
          <li>{{error}}</li>
        {% endfor %}
      </div>
    </div>

    <!-- Countdown timer 
    Taken from: https://contactmentor.com/build-30-minutes-countdown-timer-js-sound/
    -->
    <h1>CountDown Timer</h1>
    <div>
      <span class="count-digit">0</span>
      <span class="count-digit">0</span>
      <span class="separator">:</span>
      <span class="count-digit">0</span>
      <span class="count-digit">0</span>
    </div>
    <div class="options">
      <button id="stop-timer">
        <img src="https://img.icons8.com/ios-glyphs/30/000000/pause--v1.png" />
      </button>
      <button id="start-timer">
        <img src="https://img.icons8.com/ios-glyphs/30/000000/play--v1.png" />
      </button>
      <button id="reset-timer">
        <img src="https://img.icons8.com/ios-glyphs/30/000000/stop.png" />
      </button>
    </div>
    <audio id="alarm_audio"></audio>




    <div class="row my-5">
      <h3 class="text-center display-4">Create a Pomodoro</h3>

      <button _="on click toggle .hidden on #create-category then
                if my innerHTML == 'Create Category'
                  set my innerHTML to 'Hide'
                otherwise 
                  set my innerHTML to 'Create Category'"
                >Create Category</button>

      <form id="create-category" class="hidden" method="POST">
        <div id="new-category" class="mb-3">
          <label>Create a category</label>
          <input id="new-category-name" type="text" name="category_name" 
                 class="form-control" required
                 _="on click put '' into #new-category-name's value">
          <button id="new-category-btn" type="submit" hx-post="/categories" 
                  hx-target="#category-names"
                  hx-swap="outerHTML"
                  >Create</button>
        </div>
      </form>

      <form method="POST" hx-post="/pomodoros" hx-target="#placeholder" id="pomodoro-form">
        <div class="mb-3">
          <label for="category-names">Categories</label>
          <div id="category-names" hx-get="/categories" hx-trigger="load" hx-target="this" hx-swap="outerHTML"></div>

        </div>

        <div class="mb-3">
            <label for="project-names">Projects</label>
            <select id="project-names" required></select>
        </div>
        <div class="mb-3">
            <label for="pomodoro-duration">Duration in minutes:</label>
            <input type="number" id="pomodoro-duration" name="duration" min="25" max="25" step="5" placeholder="25" required>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>

    <div id="placeholder"></div>

    <div class="mb-3">
      <a href="recalls/create_recall" target="_blank" rel="noopener noreferrer">Create a Recall</a>
    </div>

  </div>
{% endblock %}